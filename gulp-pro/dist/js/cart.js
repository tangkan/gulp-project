"use strict";require(["config"],function(){require(["popBox","template","url","header","footer"],function(s,h,u,n,t){n.init1(s,u,h);var d=s.cookie("user").split(".")[1];s.ajax({url:u.url+"/php/goodsList.php",type:"GET",dataType:"json",data:{userid:d},success:function(n){if(0<n.length){var c=function(n){var t=h("cartGoods",{data:n});s("#cartGoodsContent").html(t),l(n),r(n),a(n),o(),e()},e=function(){var n=0;s(".checkBtn").each(function(){s(this).is(":checked")?n+=parseInt(s(this).parent().siblings(".c_sum").children().children().html()):n+=0});var t=h("allPrice",{allPrice:n});s("#allPriceContent").html(t)},o=function(){var t=0;s("#allCheck").on("click",function(){if(s(this).is(":checked"))for(var n=0;n<s(".checkBtn").length;n++)s(".checkBtn").prop("checked",!0),t=s(".checkBtn").length;else for(n=0;n<s(".checkBtn").length;n++)s(".checkBtn").prop("checked",!1),t=0;e()});for(var n=0;n<s(".checkBtn").length;n++)s(".checkBtn").on("click",function(){s(this).is(":checked")?t++:t--,t==s(".checkBtn").length?s("#allCheck").prop("checked",!0):s("#allCheck").prop("checked",!1),e()})},i=function(n,t){s.ajax({url:u.url+"/php/goodNum.php",type:"GET",dataType:"json",data:{userid:d,goodNum:n,num:t},success:function(n){c(n)}})},l=function(n){for(var t=0;t<n.length;t++){var e="#lessBtn"+n[t].goodNum;s(e).on("click",function(){var n=s(this).parent().siblings(".goodNumber").children().val();--n<=1&&(n=1);var t=s(this).siblings().val();i(t,n)})}},r=function(n){for(var t=0;t<n.length;t++){var e="#addBtn"+n[t].goodNum;s(e).on("click",function(){var n=s(this).parent().siblings(".goodNumber").children().val();n++;var t=s(this).siblings().val();i(t,n)})}},a=function(n){for(var t=0;t<n.length;t++){var e="#delBtn"+n[t].goodNum;s(e).on("click",function(){var n=s(this).siblings().val();s.ajax({url:u.url+"/php/delGood.php",type:"GET",dataType:"json",data:{userid:d,goodNum:n},success:function(n){if(0<n.length)c(n);else{console.log(n.length);var t=h("cartNull");s("#cartGoodsContent").html(t)}}})})}};c(n)}else{var t=h("cartNull");s("#cartGoodsContent").html(t)}}}),t.init()})});